<script setup>
/**
 * MyProjects.vue
 * -------------------
 * ä¿®å¤ç‰ˆï¼š
 * 1. ä¿®å¤äº† contentBlocks çš„å±‚çº§ç»“æ„
 * 2. ä¿®å¤äº† botDemo1/2 æœªå®šä¹‰çš„é—®é¢˜
 * 3. è¡¥å…¨äº†å…¶ä»–ä¸¤ä¸ªé¡¹ç›®ï¼Œé˜²æ­¢é¡µé¢ç©ºè¡è¡
 */

import { ref } from 'vue'
import ProjectCard from '../components/ProjectCard.vue'

// ğŸ“¦ 1. èµ„æºå¯¼å…¥åŒºåŸŸ
import botImg from '../assets/bot.png' 
// å‡è®¾ä½ è¿˜æœ‰å…¶ä»–å›¾ç‰‡ï¼Œå…ˆåœ¨è¿™é‡Œ import
// import gameImg from '../assets/game.jpg' 

// âš ï¸ ä¸ºäº†é˜²æ­¢æŠ¥é”™ï¼Œæˆ‘æš‚æ—¶æŠŠè¿™ä¸¤ä¸ªå˜é‡æŒ‡å‘ botImg
// ç­‰ä½ æœ‰äº†çœŸå®çš„æ¼”ç¤ºå›¾ï¼Œè¯·å–æ¶ˆä¸‹é¢ä¸¤è¡Œçš„æ³¨é‡Šï¼Œå¹¶åˆ é™¤ä¸´æ—¶å˜é‡
// import botDemo1 from '../assets/bot_demo_1.png'
// import botDemo2 from '../assets/bot_demo_2.png'
const botDemo1 = botImg // (ä¸´æ—¶å ä½)
const botDemo2 = botImg // (ä¸´æ—¶å ä½)


// ğŸ“¦ 2. é¡¹ç›®æ•°æ®å®šä¹‰
const allProjects = ref([
  {
    id: 1,
    title: "QQ Bot æ’ä»¶ç³»ç»Ÿ",
    date: "2025-11",
    desc: "åŸºäº Python çš„ QQ æœºå™¨äººæ’ä»¶ï¼Œå®ç°äº†è¡¨æƒ…åŒ…è‡ªåŠ¨å›å¤ä¸ç¾¤ç®¡ç†åŠŸèƒ½ã€‚",
    image: botImg, 
    techStack: ["Python", "Napcat"],
    
    // â­ è¯¦æƒ…é¡µä¸“å±å†…å®¹
    // å…³é”®ä¿®å¤ï¼šå¿…é¡»åŒ…è£¹åœ¨ detail å¯¹è±¡é‡Œï¼
    detail: {
      // ä½¿ç”¨ contentBlocks æ•°ç»„æ¥å®ç°å›¾æ–‡æ··æ’
      contentBlocks: [
        { 
          type: 'text', 
          value: "è¿™ä¸ªé¡¹ç›®çš„åˆè¡·æ˜¯ä¸ºäº†æ–¹ä¾¿ç¾¤ç®¡ç†ï¼ŒåŒæ—¶ä¹Ÿæƒ³å°è¯•ä¸€ä¸‹å¼‚æ­¥ç¼–ç¨‹ã€‚é€šè¿‡è°ƒç”¨ Napcat çš„ APIï¼Œæˆ‘å®ç°äº†ä¸€å¥—è½»é‡çº§çš„æ’ä»¶ç³»ç»Ÿã€‚" 
        },
        { 
          type: 'image', 
          value: botDemo1,  // è¿™é‡Œä½¿ç”¨äº†ä¸Šé¢çš„å˜é‡
          caption: "æœºå™¨äººå®é™…è¿è¡Œæ•ˆæœå›¾" 
        },
        { 
          type: 'text', 
          value: "ä¸ºäº†é™ä½è€¦åˆåº¦ï¼Œæˆ‘è®¾è®¡äº†åŸºäºäº‹ä»¶åˆ†å‘çš„æ’ä»¶æ¶æ„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š" 
        },
        { 
          type: 'image', 
          value: botDemo2, 
          caption: "ç³»ç»Ÿæ¶æ„ç¤ºæ„å›¾" 
        },
        { 
          type: 'text', 
          value: "æœ€ç»ˆï¼Œæˆ‘ä»¬å°†ç¾¤ç®¡ç†çš„ç»´æŠ¤æˆæœ¬é™ä½äº† 80%ã€‚" 
        }
      ],
      features: [
        "æ”¯æŒçƒ­æ’æ‹”ï¼šæ— éœ€é‡å¯æœºå™¨äººå³å¯åŠ è½½æ–°æ’ä»¶",
        "è¡¨æƒ…åŒ…äº’åŠ¨ï¼šå…³é”®è¯è§¦å‘ /set_msg_emoji_like",
        "ç¾¤ç®¡åŠŸèƒ½ï¼šè‡ªåŠ¨æ’¤å›è¿ç¦è¯æ¶ˆæ¯"
      ],
      links: [
        { name: "GitHub ä»“åº“", url: "https://github.com/yourname/qq-bot" },
        { name: "æ¼”ç¤ºè§†é¢‘", url: "https://bilibili.com" }
      ]
    }
  },
  {
    id: 2,
    title: "C++ 2D æ¸¸æˆå¼•æ“",
    date: "2023-09",
    desc: "å’ŒåŒå­¦åˆä½œå¼€å‘çš„æ¸¸æˆé¡¹ç›®ï¼Œä½¿ç”¨ Qt ä½œä¸ºå›¾å½¢åº“ã€‚",
    image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=600&auto=format&fit=crop",
    techStack: ["C++", "Qt"],
    
    detail: {
      // å¦‚æœæ²¡æœ‰å›¾ç‰‡ï¼Œå¯ä»¥åªæ”¾ text å—
      contentBlocks: [
        { type: 'text', value: "è¿™æ˜¯ä¸€ä¸ªå¤§ä½œä¸šé¡¹ç›®ã€‚æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ç°æˆçš„æ¸¸æˆå¼•æ“ï¼Œè€Œæ˜¯ä»é›¶å¼€å§‹ç”¨ C++ å°è£…äº†ç‰©ç†ç¢°æ’å’Œç²’å­ç³»ç»Ÿã€‚" },
        { type: 'text', value: "åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘æ·±åˆ»ç†è§£äº†æ¸¸æˆå¾ªç¯ï¼ˆGame Loopï¼‰çš„åŸç†ä»¥åŠ Qt å›¾å½¢è§†å£æ¡†æ¶çš„ä½¿ç”¨ã€‚" }
      ],
      features: [
        "è‡ªå®šä¹‰ç‰©ç†å¼•æ“ï¼šæ”¯æŒ AABB ç¢°æ’æ£€æµ‹",
        "åŒäººè”æœºï¼šé€šè¿‡ Socket å®ç°å±€åŸŸç½‘å¯¹æˆ˜"
      ],
      links: [
        { name: "æŸ¥çœ‹æºç ", url: "#" } 
      ]
    }
  },
  {
    id: 3,
    title: "ä¸ªäººä¸»é¡µ (This Site)",
    date: "2024-01",
    desc: "ä½¿ç”¨ Vue 3 + Vite æ„å»ºçš„ç°ä»£åŒ–ä¸ªäººä¸»é¡µã€‚",
    image: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=600&auto=format&fit=crop",
    techStack: ["Vue3", "Vite"],
    
    detail: {
      contentBlocks: [
         { type: 'text', value: "ä¸ºäº†å±•ç¤ºæˆ‘çš„ç¼–ç¨‹é¡¹ç›®ï¼Œæˆ‘å†³å®šäº²æ‰‹æ‰“é€ è¿™ä¸ªä¸ªäººä¸»é¡µã€‚" }
      ],
      features: ["å“åº”å¼è®¾è®¡", "å¹³æ»‘åŠ¨ç”»"],
      links: []
    }
  }
])

// ğŸ“¦ 3. äº¤äº’é€»è¾‘
const selectedProject = ref(null)

function openProject(project) {
  selectedProject.value = project
}

function closeProject() {
  selectedProject.value = null
}
</script>

<template>
  <div class="projects-container">
    
    <Transition name="fade-slide" mode="out-in">
      
      <div v-if="!selectedProject" class="project-grid">
        <ProjectCard 
          v-for="project in allProjects" 
          :key="project.id" 
          :project="project"
          @click="openProject(project)"
        />
      </div>

      <div v-else class="project-detail">
        
        <div class="detail-nav">
          <button class="back-btn" @click="closeProject">
            â† è¿”å›åˆ—è¡¨
          </button>
        </div>

        <div class="detail-content">
          
          <img :src="selectedProject.image" class="detail-cover" />
          
          <h1>{{ selectedProject.title }}</h1>
          <div class="meta-row">
            <span class="date">ğŸ“… {{ selectedProject.date }}</span>
            <div class="tags">
              <span v-for="t in selectedProject.techStack" :key="t" class="tag">{{ t }}</span>
            </div>
          </div>
          
          <div class="section-block" v-if="selectedProject.detail?.contentBlocks">
            <h3>ğŸ’¡ é¡¹ç›®ä»‹ç»</h3>
          
            <div v-for="(block, index) in selectedProject.detail.contentBlocks" :key="index" class="content-item">
              
              <p v-if="block.type === 'text'" class="intro-text">
                {{ block.value }}
              </p>
              
              <div v-else-if="block.type === 'image'" class="intro-image-wrapper">
                <img :src="block.value" class="intro-image" />
                <span v-if="block.caption" class="image-caption">{{ block.caption }}</span>
              </div>
              
            </div>
          </div>
          
          <hr class="divider" />
          
          <div class="section-block" v-if="selectedProject.detail?.features">
            <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
            <ul class="feature-list">
              <li v-for="(feat, index) in selectedProject.detail.features" :key="index">
                {{ feat }}
              </li>
            </ul>
          </div>

          <div class="action-area" v-if="selectedProject.detail?.links && selectedProject.detail.links.length > 0">
            <a 
              v-for="link in selectedProject.detail.links" 
              :key="link.name"
              :href="link.url"
              target="_blank" 
              class="link-btn"
            >
              {{ link.name }} â†—
            </a>
          </div>
          
        </div>
      </div>

    </Transition>
  </div>
</template>

<style scoped>
/* =========================================
   1. å®¹å™¨ä¸ç½‘æ ¼å¸ƒå±€
   ========================================= */
.projects-container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding-top: 10px; /* é¡¶éƒ¨ç•™ç™½ */
}

.project-grid {
  display: grid;
  /* è‡ªåŠ¨å“åº”å¼å¸ƒå±€ï¼šæœ€çª„ 260pxï¼Œè‡ªåŠ¨æ¢è¡Œ */
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 30px;
  padding-bottom: 40px; /* åº•éƒ¨ç•™ç™½é˜²æ­¢é®æŒ¡ */
}

/* =========================================
   2. è¯¦æƒ…é¡µå¸ƒå±€æ¡†æ¶
   ========================================= */
.project-detail {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.detail-nav {
  margin-bottom: 20px;
}

.back-btn {
  background: none;
  border: none;
  font-size: 1rem;
  color: #555;
  cursor: pointer;
  font-weight: bold;
  transition: color 0.3s;
}
.back-btn:hover {
  color: #42b883; /* æ‚¬åœå˜ Vue ç»¿ */
}

.detail-content {
  background: rgba(255,255,255,0.6); /* è¯¦æƒ…é¡µèƒŒæ™¯ç¨ç™½ä¸€ç‚¹ï¼Œæ–¹ä¾¿é˜…è¯» */
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  margin-bottom: 40px; /* é˜²æ­¢åº•éƒ¨è´´è¾¹ */
}

.detail-cover {
  width: 100%;
  height: 300px;
  object-fit: cover;
  border-radius: 12px;
  margin-bottom: 25px;
}

/* =========================================
   3. è¯¦æƒ…é¡µæ’ç‰ˆç»†èŠ‚
   ========================================= */
h1 {
  margin: 0 0 10px 0;
  color: #333;
}

.meta-row {
  display: flex;
  gap: 20px;
  align-items: center;
  margin-bottom: 30px;
  color: #666;
}

.tag {
  background: #eee;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.8rem;
  margin-right: 5px;
  color: #555;
}

.section-block {
  margin: 25px 0;
}

.section-block h3 {
  font-size: 1.2rem;
  color: #333;
  margin-bottom: 12px;
  border-left: 4px solid #42b883; /* å·¦ä¾§ç»¿è‰²è£…é¥°æ¡ */
  padding-left: 10px;
}

.intro-text {
  line-height: 1.8;
  color: #555;
  font-size: 1rem;
}

.divider {
  border: 0;
  height: 1px;
  background: rgba(0,0,0,0.1);
  margin: 30px 0;
}

/* åŠŸèƒ½åˆ—è¡¨æ ·å¼ */
.feature-list {
  list-style: none;
  padding: 0;
}

.feature-list li {
  position: relative;
  padding-left: 25px;
  margin-bottom: 10px;
  color: #444;
  line-height: 1.6;
}

.feature-list li::before {
  content: "âœ“";
  position: absolute;
  left: 0;
  color: #42b883;
  font-weight: bold;
}

/* é“¾æ¥æŒ‰é’®æ ·å¼ */
.action-area {
  display: flex;
  gap: 15px;
  margin-top: 40px;
}

.link-btn {
  text-decoration: none;
  padding: 10px 24px;
  background: #333;
  color: white;
  border-radius: 8px;
  font-size: 0.9rem;
  transition: all 0.3s;
  display: inline-block;
}

.link-btn:hover {
  background: #42b883;
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(66, 184, 131, 0.3);
}

/* =========================================
   4. åŠ¨ç”»æ•ˆæœ
   ========================================= */
.fade-slide-enter-active,
.fade-slide-leave-active {
  transition: all 0.4s ease;
}
.fade-slide-enter-from { opacity: 0; transform: translateX(20px); }
.fade-slide-leave-to { opacity: 0; transform: translateX(-20px); }

/* --- å›¾æ–‡æ··æ’æ ·å¼ --- */

/* ç»™æ¯ä¸ªå—ä¹‹é—´åŠ ç‚¹é—´è· */
.content-item {
  margin-bottom: 20px;
}

/* æ–‡å­—å—æ ·å¼ */
.intro-text {
  line-height: 1.8;
  color: #555;
  font-size: 1rem;
  margin: 0; /* æ¸…é™¤é»˜è®¤è¾¹è·ï¼Œç”± content-item æ§åˆ¶ */
}

/* å›¾ç‰‡å®¹å™¨ */
.intro-image-wrapper {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center; /* å›¾ç‰‡å±…ä¸­ */
  margin: 25px 0;
}

/* æ’å…¥çš„å›¾ç‰‡æœ¬èº« */
.intro-image {
  max-width: 100%;       /* ä¸è¶…è¿‡å®¹å™¨å®½åº¦ */
  border-radius: 12px;   /* åœ†è§’ */
  box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* æ¼‚äº®çš„é˜´å½± */
  border: 1px solid rgba(255,255,255,0.5);
  transition: transform 0.3s;
}

/* é¼ æ ‡æ‚¬åœå¾®æ”¾å¤§ */
.intro-image:hover {
  transform: scale(1.02);
}

/* å›¾ç‰‡ä¸‹æ–¹çš„å°å­—è¯´æ˜ */
.image-caption {
  font-size: 0.85rem;
  color: #888;
  margin-top: 10px;
  font-style: italic;
}
</style>